define(["jquery","core/config","core/log","block_course_recycle/bootstrap-select"],function(a,b,c,d){var e={init:function(){a(".recycle-course-edit-handle").bind("click",this.load_change_form),a("#modal-status-save").bind("click",this.submit_change_form),a("#menutopcatid").bind("change",this.reload_category),a("#confirm-selectall-handle").bind("click",this.select_all),a("#confirm-unselectall-handle").bind("click",this.unselect_all),a("#menuchangestatus").bind("change",this.group_change),c.debug("AMD Course Recycle List initialized")},load_change_form:function(){var c=a(this),d='<div class="centered"><center><img id="detail-waiter" src="';d+=b.wwwroot+'/pix/i/ajaxloader.gif" /></center></div>',a("#recyclelist-edit-inner-form").html(d);var e=c.attr("data-course"),f=b.wwwroot+"/blocks/course_recycle/ajax/services.php";f+="?what=getmodalform",f+="&id="+e,a.get(f,function(b){a("#recyclelist-edit-inner-form").html(b),a("#modal-status-save").attr("data-course",e),a(".selectpicker").selectpicker()},"html")},submit_change_form:function(){var c=a(this),d=c.attr("data-course"),f=b.wwwroot+"/blocks/course_recycle/ajax/services.php";f+="?what=changerecycle",f+="&id="+d;var g="recycleaction",h=a("[name="+g+"]:checked").val();f+="&status="+h,f+="&postactions="+e.get_postactions_code(h),a.get(f,function(b){if("success"===b.result){var c="status-"+b.oldstate;a(".recycle-list-status-"+d).removeClass(c);var e="status-"+b.newstate;a(".recycle-list-status-"+d).addClass(e),a("#recycle-status-"+d).html(b.newlabel),a("#recyclelist-edit-form").modal("hide")}},"json")},get_status_code:function(a){var b=["Ask","RequestForArchive","Stay","Reset","Clone","Delete","Archive","CloneAndReset","ArchiveAndDelete","ArchiveAndReset","ArchiveAndRetire","ArchiveCloneAndReset"];return b[a]},get_postactions_code:function(a){var b={Ask:"",RequestForArchive:"",Stay:"",Reset:"",Clone:"",Delete:"",Archive:"",CloneAndReset:"",ArchiveAndDelete:"Delete",ArchiveAndReset:"Reset",ArchiveAndRetire:"Retire",ArchiveCloneAndReset:"CloneAndReset"};return b[a]},reload_category:function(){a("#recycle-confirm-category-filter-form").submit()},select_all:function(){a(".confirm-select").prop("checked",!0)},unselect_all:function(){a(".confirm-select").prop("checked",!1)},group_change:function(){a("#id-groupcommands").submit()}};return e});